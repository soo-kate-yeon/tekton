#!/bin/sh
#
# Pre-commit Hook
# [TAG-Q-006] ì½”ë“œ ì»¤ë°‹ ì‹œ TAG ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
#

# 1. TAG ê²€ì¦
echo "ğŸ·ï¸  Validating TAG annotations..."
pnpm run validate:tags || {
  echo "âŒ TAG validation failed. Please add TAG annotations."
  echo "ğŸ’¡ See docs/quality/tag-system.md for details."
  exit 1
}

# 2. tsup + composite í˜¸í™˜ì„± ê²€ì‚¬
echo "ğŸ” Checking tsup + TypeScript composite compatibility..."
pnpm check:tsup || exit 1

# 2. ë¹Œë“œ ê²€ì¦
echo "ğŸ”¨ Building all packages..."
pnpm build:all || exit 1

# 3. Lint-staged (ESLint)
echo "ğŸ“ Running lint-staged..."
pnpm exec lint-staged || exit 1

echo "âœ… Pre-commit checks passed!"
